@model ForgotPasswordViewModel
@{
    ViewData["Title"] = "Forgot Password";
}

@section Styles {
    <link rel="stylesheet" href="~/css/customer-styles.css" />
    <link rel="stylesheet" href="~/css/forgot-password.css" />
}

<div class="forgot-password-hero">
    <div class="floating-shapes">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>
    
    <div class="forgot-password-container">
        <div class="forgot-password-header">
            <div class="forgot-password-icon">
                <i class="fas fa-key"></i>
            </div>
            <h1 class="forgot-password-title">Forgot Password?</h1>
            <p class="forgot-password-subtitle">
                Don't worry! Enter your email address and we'll send you a secure link to reset your password.
            </p>
        </div>

        <form asp-action="ForgotPassword" method="post" class="forgot-password-form" id="forgotPasswordForm">
            @Html.AntiForgeryToken()
            <div asp-validation-summary="ModelOnly" class="validation-summary"></div>
            
            <div class="form-group">
                <label asp-for="Email" class="form-label">
                    <i class="fas fa-envelope"></i>
                    Email Address
                </label>
                <input asp-for="Email" class="form-input" placeholder="Enter your email address" id="emailInput" />
                <span asp-validation-for="Email" class="validation-error"></span>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                <i class="fas fa-paper-plane"></i>
                <span id="submitText">Send Reset Link</span>
                <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>
            </button>
        </form>

        <div class="back-link">
            <a asp-action="Login">
                <i class="fas fa-arrow-left"></i>
                Back to Login
            </a>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const form = document.getElementById('forgotPasswordForm');

            // Form submission with loading state
            form.addEventListener('submit', function(e) {
                // Show loading state
                submitBtn.disabled = true;
                submitText.style.display = 'none';
                loadingSpinner.style.display = 'flex';
            });

            // Auto-dismiss alerts
            setTimeout(function() {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(alert => {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                });
            }, 5000);
        });
    </script>
}